cmake_minimum_required( VERSION 3.0 )

SET( F3D_LIB_NAME f3d )
SET( F3D_HEADER_PATH ../include/f3d/ )
SET( F3D_HEADERS 
  ${F3D_HEADER_PATH}/f3d.h
  ${F3D_HEADER_PATH}/core/settings.h
  ${F3D_HEADER_PATH}/core/window.h
 )

SET( f3d_src
	 firestone.cpp
	 core/settings.cpp
	 core/window.cpp
	 
	 ${F3D_HEADERS}
)

if ( MSVC )
  ADD_DEFINITIONS( -D_SCL_SECURE_NO_WARNINGS )
  ADD_DEFINITIONS( -D_CRT_SECURE_NO_WARNINGS )
endif ( MSVC )

INCLUDE_DIRECTORIES ( ${F3D_HEADER_PATH} ${VULKAN_INCLUDE_DIRS} ${ASSIMP_INCLUDE_DIRS} ${GLFW_INCLUDE_DIRS})
ADD_LIBRARY ( firestone ${f3d_src} )
TARGET_LINK_LIBRARIES ( firestone ${ASSIMP_LIBRARIES} ${VULKAN_LIBRARIES} ${GLFW_LIBRARIES} )

SET_TARGET_PROPERTIES( firestone PROPERTIES
						VERSION ${F3D_VERSION}
						SOVERSION ${F3D_SOVERSION}
						OUTPUT_NAME ${F3D_LIB_NAME}
)

INSTALL( TARGETS firestone
		 LIBRARY DESTINATION ${F3D_LIB_INSTALL_DIR}
		 ARCHIVE DESTINATION ${F3D_LIB_INSTALL_DIR}
		 RUNTIME DESTINATION ${F3D_BIN_INSTALL_DIR}
)